{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shahn\\\\OneDrive\\\\\\u30C9\\u30AD\\u30E5\\u30E1\\u30F3\\u30C8\\\\GitHub\\\\LandLytics_Backend\\\\Database Integration\\\\src\\\\sample reg filter\\\\RegulationFilterPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport FilterDropdown from \"./FilterDropdown\";\nimport axios from \"axios\";\nimport styles from \"./RegulationFilter.module.css\";\nimport Sidebar from \"../CommonComponents/Sidebar\";\nimport TopBar from \"./TopBar\";\n\n// Static fallback data\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst staticCategories = {\n  subdivision: [\"General Requirements\", \"Survey Requirements\", \"Survey Plan Standards\", \"Plot Size Regulations\"],\n  development: [\"Street\", \"Road and Water Body Compliance\"],\n  infrastructure: [\"Road Access Rules\"],\n  community: [\"Community Space Requirement\"],\n  residential: [\"Subdivision Exemption\"],\n  building: [\"Development Permit Validity\"],\n  planning: [\"Site Plan Requirements\"],\n  safety: [\"Fire Safety Compliance\"]\n};\nfunction RegulationFilterPage() {\n  _s();\n  const navigate = useNavigate();\n  const [categories, setCategories] = useState({});\n  const [subCategories, setSubCategories] = useState({});\n  const [filters, setFilters] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Fetch categories on component mount\n  useEffect(() => {\n    setLoading(true);\n    axios.get(\"http://127.0.0.1:5000/api/categories\").then(response => {\n      setCategories(response.data);\n    }).catch(() => {\n      console.warn(\"API failed. Using fallback static data.\");\n      setCategories(staticCategories); // Fallback to static data\n    }).finally(() => setLoading(false));\n  }, []);\n\n  // Fetch sub-categories when a category is selected\n  const handleCategoryChange = category => {\n    if (category) {\n      setLoading(true);\n      axios.get(`http://localhost:5000/api/subcategories?category=${category}`).then(response => {\n        setSubCategories(prev => ({\n          ...prev,\n          [category]: response.data\n        }));\n      }).catch(error => {\n        console.error(`Error fetching sub-categories for ${category}:`, error);\n        setError(\"Failed to fetch sub-categories. Please try again later.\");\n      }).finally(() => setLoading(false));\n    }\n  };\n\n  // Handle filter selection\n  const handleFilterChange = (category, value) => {\n    setFilters(prevFilters => ({\n      ...prevFilters,\n      [category]: value\n    }));\n  };\n\n  // Generate Report based on filters\n  const handleGenerateReport = () => {\n    if (Object.keys(filters).length === 0) {\n      setError(\"Please select at least one filter before generating the report.\");\n      return;\n    }\n    setLoading(true);\n    axios.get(\"http://localhost:5000/api/regulation-filter\", {\n      params: filters\n    }).then(response => {\n      navigate(\"/regulation-report\", {\n        state: {\n          data: response.data\n        }\n      });\n    }).catch(error => {\n      console.error(\"Error fetching filtered regulations:\", error);\n      setError(\"Failed to generate the report. Please try again later.\");\n    }).finally(() => setLoading(false));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TopBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: styles.mainContent,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.contentArea,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: styles.title,\n          children: \"FILTER REGULATIONS BY...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 23\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.error,\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this), Object.keys(categories).map(category => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FilterDropdown, {\n            placeholderText: `Eg: Select ${category}`,\n            items: subCategories[category] || categories[category] || [] // Default to an empty array\n            ,\n            onChange: value => {\n              handleFilterChange(category, value);\n              handleCategoryChange(category);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 15\n          }, this)]\n        }, category, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.generateReportButton,\n          onClick: handleGenerateReport,\n          disabled: loading || Object.keys(filters).length === 0,\n          children: loading ? \"Generating...\" : \"GENERATE REPORT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\n_s(RegulationFilterPage, \"tT/wG8kh0qh0/uapl9bqWLhJPLM=\", false, function () {\n  return [useNavigate];\n});\n_c = RegulationFilterPage;\nexport default RegulationFilterPage;\nvar _c;\n$RefreshReg$(_c, \"RegulationFilterPage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","FilterDropdown","axios","styles","Sidebar","TopBar","jsxDEV","_jsxDEV","staticCategories","subdivision","development","infrastructure","community","residential","building","planning","safety","RegulationFilterPage","_s","navigate","categories","setCategories","subCategories","setSubCategories","filters","setFilters","loading","setLoading","error","setError","get","then","response","data","catch","console","warn","finally","handleCategoryChange","category","prev","handleFilterChange","value","prevFilters","handleGenerateReport","Object","keys","length","params","state","className","container","children","fileName","_jsxFileName","lineNumber","columnNumber","mainContent","contentArea","title","map","placeholderText","items","onChange","generateReportButton","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/shahn/OneDrive/ドキュメント/GitHub/LandLytics_Backend/Database Integration/src/sample reg filter/RegulationFilterPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport FilterDropdown from \"./FilterDropdown\";\r\nimport axios from \"axios\";\r\nimport styles from \"./RegulationFilter.module.css\";\r\nimport Sidebar from \"../CommonComponents/Sidebar\";\r\nimport TopBar from \"./TopBar\";\r\n\r\n// Static fallback data\r\nconst staticCategories = {\r\n  subdivision: [\"General Requirements\", \"Survey Requirements\", \"Survey Plan Standards\", \"Plot Size Regulations\"],\r\n  development: [\"Street\", \"Road and Water Body Compliance\"],\r\n  infrastructure: [\"Road Access Rules\"],\r\n  community: [\"Community Space Requirement\"],\r\n  residential: [\"Subdivision Exemption\"],\r\n  building: [\"Development Permit Validity\"],\r\n  planning: [\"Site Plan Requirements\"],\r\n  safety: [\"Fire Safety Compliance\"],\r\n};\r\n\r\nfunction RegulationFilterPage() {\r\n  const navigate = useNavigate();\r\n  const [categories, setCategories] = useState({});\r\n  const [subCategories, setSubCategories] = useState({});\r\n  const [filters, setFilters] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Fetch categories on component mount\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    axios\r\n      .get(\"http://127.0.0.1:5000/api/categories\")\r\n      .then((response) => {\r\n        setCategories(response.data);\r\n      })\r\n      .catch(() => {\r\n        console.warn(\"API failed. Using fallback static data.\");\r\n        setCategories(staticCategories); // Fallback to static data\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  // Fetch sub-categories when a category is selected\r\n  const handleCategoryChange = (category) => {\r\n    if (category) {\r\n      setLoading(true);\r\n      axios\r\n        .get(`http://localhost:5000/api/subcategories?category=${category}`)\r\n        .then((response) => {\r\n          setSubCategories((prev) => ({\r\n            ...prev,\r\n            [category]: response.data,\r\n          }));\r\n        })\r\n        .catch((error) => {\r\n          console.error(`Error fetching sub-categories for ${category}:`, error);\r\n          setError(\"Failed to fetch sub-categories. Please try again later.\");\r\n        })\r\n        .finally(() => setLoading(false));\r\n    }\r\n  };\r\n\r\n  // Handle filter selection\r\n  const handleFilterChange = (category, value) => {\r\n    setFilters((prevFilters) => ({\r\n      ...prevFilters,\r\n      [category]: value,\r\n    }));\r\n  };\r\n\r\n  // Generate Report based on filters\r\n  const handleGenerateReport = () => {\r\n    if (Object.keys(filters).length === 0) {\r\n      setError(\"Please select at least one filter before generating the report.\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    axios\r\n      .get(\"http://localhost:5000/api/regulation-filter\", { params: filters })\r\n      .then((response) => {\r\n        navigate(\"/regulation-report\", { state: { data: response.data } });\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching filtered regulations:\", error);\r\n        setError(\"Failed to generate the report. Please try again later.\");\r\n      })\r\n      .finally(() => setLoading(false));\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div>\r\n        <Sidebar />\r\n        <TopBar />\r\n      </div>\r\n\r\n      <main className={styles.mainContent}>\r\n        <div className={styles.contentArea}>\r\n          <h1 className={styles.title}>FILTER REGULATIONS BY...</h1>\r\n\r\n          {loading && <p>Loading...</p>}\r\n          {error && <p className={styles.error}>{error}</p>}\r\n\r\n          {Object.keys(categories).map((category) => (\r\n            <div key={category}>\r\n              <h3>{category}</h3>\r\n              <FilterDropdown\r\n                placeholderText={`Eg: Select ${category}`}\r\n                items={subCategories[category] || categories[category] || []} // Default to an empty array\r\n                onChange={(value) => {\r\n                  handleFilterChange(category, value);\r\n                  handleCategoryChange(category);\r\n                }}\r\n              />\r\n              <br />\r\n            </div>\r\n          ))}\r\n\r\n          <button\r\n            className={styles.generateReportButton}\r\n            onClick={handleGenerateReport}\r\n            disabled={loading || Object.keys(filters).length === 0}\r\n          >\r\n            {loading ? \"Generating...\" : \"GENERATE REPORT\"}\r\n          </button>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RegulationFilterPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}