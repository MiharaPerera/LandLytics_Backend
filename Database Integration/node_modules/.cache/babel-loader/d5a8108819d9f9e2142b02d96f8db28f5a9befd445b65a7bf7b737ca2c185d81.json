{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shahn\\\\OneDrive\\\\\\u30C9\\u30AD\\u30E5\\u30E1\\u30F3\\u30C8\\\\GitHub\\\\LandLytics_Backend\\\\Database Integration\\\\src\\\\sample reg filter\\\\RegulationFilterPage.jsx\",\n  _s = $RefreshSig$();\n//import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport FilterDropdown from \"./FilterDropdown\";\nimport axios from \"axios\";\nimport styles from \"./RegulationFilter.module.css\";\nimport Sidebar from \"../CommonComponents/Sidebar\";\nimport TopBar from \"./TopBar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RegulationFilterPage() {\n  _s();\n  const navigate = useNavigate();\n  const [categories, setCategories] = useState([]);\n  const [subCategories, setSubCategories] = useState({});\n  const [filters, setFilters] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Fetch categories on component mount\n  useEffect(() => {\n    setLoading(true);\n    axios.get(\"http://127.0.0.1:5000/api/categories\").then(response => setCategories(response.data)).catch(error => {\n      console.error(\"Error fetching categories:\", error);\n      setError(\"Failed to fetch categories. Please try again later.\");\n    }).finally(() => setLoading(false));\n  }, []);\n\n  // Fetch sub-categories when a category is selected\n  const handleCategoryChange = category => {\n    if (category) {\n      // Reset subcategories before fetching\n      setSubCategories(prev => ({\n        ...prev,\n        [category]: []\n      }));\n      setLoading(true);\n      axios.get(`http://localhost:5000/api/subcategories?category=${category}`).then(response => {\n        setSubCategories(prev => ({\n          ...prev,\n          [category]: response.data\n        }));\n      }).catch(error => {\n        console.error(`Error fetching sub-categories for ${category}:`, error);\n        setError(\"Failed to fetch sub-categories. Please try again later.\");\n      }).finally(() => setLoading(false));\n    }\n  };\n\n  // Handle filter selection\n  const handleFilterChange = (category, value) => {\n    setFilters(prevFilters => ({\n      ...prevFilters,\n      [category]: value\n    }));\n  };\n\n  // Generate Report based on filters\n  const handleGenerateReport = () => {\n    if (Object.keys(filters).length === 0) {\n      setError(\"Please select at least one filter before generating the report.\");\n      return;\n    }\n    setLoading(true);\n    axios.get(\"http://localhost:5000/api/regulation-filter\", {\n      params: filters\n    }) // Changed from POST to GET\n    .then(response => {\n      navigate(\"/regulation-report\", {\n        state: {\n          data: response.data\n        }\n      });\n    }).catch(error => {\n      console.error(\"Error fetching filtered regulations:\", error);\n      setError(\"Failed to generate the report. Please try again later.\");\n    }).finally(() => setLoading(false));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TopBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: styles.mainContent,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.contentArea,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: styles.title,\n          children: \"FILTER REGULATIONS BY...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 23\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.error,\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), categories.map(category => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FilterDropdown, {\n            placeholderText: `Eg: Select ${category}`,\n            items: subCategories[category] || [],\n            onChange: value => handleFilterChange(category, value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this)]\n        }, category, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.generateReportButton,\n          onClick: handleGenerateReport,\n          disabled: loading || Object.keys(filters).length === 0 // Button disabled if no filters\n          ,\n          children: loading ? \"Generating...\" : \"GENERATE REPORT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n_s(RegulationFilterPage, \"GCLajMkPYEpXgrCx1gJWvB5ee8k=\", false, function () {\n  return [useNavigate];\n});\n_c = RegulationFilterPage;\nexport default RegulationFilterPage; //\nvar _c;\n$RefreshReg$(_c, \"RegulationFilterPage\");","map":{"version":3,"names":["useNavigate","FilterDropdown","axios","styles","Sidebar","TopBar","jsxDEV","_jsxDEV","RegulationFilterPage","_s","navigate","categories","setCategories","useState","subCategories","setSubCategories","filters","setFilters","loading","setLoading","error","setError","useEffect","get","then","response","data","catch","console","finally","handleCategoryChange","category","prev","handleFilterChange","value","prevFilters","handleGenerateReport","Object","keys","length","params","state","className","container","children","fileName","_jsxFileName","lineNumber","columnNumber","mainContent","contentArea","title","map","placeholderText","items","onChange","generateReportButton","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/shahn/OneDrive/ドキュメント/GitHub/LandLytics_Backend/Database Integration/src/sample reg filter/RegulationFilterPage.jsx"],"sourcesContent":["//import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport FilterDropdown from \"./FilterDropdown\";\r\nimport axios from \"axios\";\r\nimport styles from \"./RegulationFilter.module.css\";\r\nimport Sidebar from \"../CommonComponents/Sidebar\";\r\nimport TopBar from \"./TopBar\";\r\n\r\nfunction RegulationFilterPage() {\r\n  const navigate = useNavigate();\r\n  const [categories, setCategories] = useState([]);\r\n  const [subCategories, setSubCategories] = useState({});\r\n  const [filters, setFilters] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Fetch categories on component mount\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    axios\r\n      .get(\"http://127.0.0.1:5000/api/categories\")\r\n      .then((response) => setCategories(response.data))\r\n      .catch((error) => {\r\n        console.error(\"Error fetching categories:\", error);\r\n        setError(\"Failed to fetch categories. Please try again later.\");\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  // Fetch sub-categories when a category is selected\r\n  const handleCategoryChange = (category) => {\r\n    if (category) {\r\n      // Reset subcategories before fetching\r\n      setSubCategories((prev) => ({\r\n        ...prev,\r\n        [category]: [],\r\n      }));\r\n\r\n      setLoading(true);\r\n      axios\r\n        .get(`http://localhost:5000/api/subcategories?category=${category}`)\r\n        .then((response) => {\r\n          setSubCategories((prev) => ({\r\n            ...prev,\r\n            [category]: response.data,\r\n          }));\r\n        })\r\n        .catch((error) => {\r\n          console.error(`Error fetching sub-categories for ${category}:`, error);\r\n          setError(\"Failed to fetch sub-categories. Please try again later.\");\r\n        })\r\n        .finally(() => setLoading(false));\r\n    }\r\n  };\r\n\r\n  // Handle filter selection\r\n  const handleFilterChange = (category, value) => {\r\n    setFilters((prevFilters) => ({\r\n      ...prevFilters,\r\n      [category]: value,\r\n    }));\r\n  };\r\n\r\n  // Generate Report based on filters\r\n  const handleGenerateReport = () => {\r\n    if (Object.keys(filters).length === 0) {\r\n      setError(\"Please select at least one filter before generating the report.\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    axios\r\n      .get(\"http://localhost:5000/api/regulation-filter\", { params: filters }) // Changed from POST to GET\r\n      .then((response) => {\r\n        navigate(\"/regulation-report\", { state: { data: response.data } });\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching filtered regulations:\", error);\r\n        setError(\"Failed to generate the report. Please try again later.\");\r\n      })\r\n      .finally(() => setLoading(false));\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div>\r\n        <Sidebar />\r\n        <TopBar />\r\n      </div>\r\n\r\n      <main className={styles.mainContent}>\r\n        <div className={styles.contentArea}>\r\n          <h1 className={styles.title}>FILTER REGULATIONS BY...</h1>\r\n\r\n          {loading && <p>Loading...</p>}\r\n          {error && <p className={styles.error}>{error}</p>}\r\n\r\n          {categories.map((category) => (\r\n            <div key={category}>\r\n              <h3>{category}</h3>\r\n              <FilterDropdown\r\n                placeholderText={`Eg: Select ${category}`}\r\n                items={subCategories[category] || []}\r\n                onChange={(value) => handleFilterChange(category, value)}\r\n              />\r\n              <br />\r\n            </div>\r\n          ))}\r\n\r\n          <button\r\n            className={styles.generateReportButton}\r\n            onClick={handleGenerateReport}\r\n            disabled={loading || Object.keys(filters).length === 0} // Button disabled if no filters\r\n          >\r\n            {loading ? \"Generating...\" : \"GENERATE REPORT\"}\r\n          </button>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RegulationFilterPage;//\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}